-- Инициализация возрастных рейтингов MPA
MERGE INTO mpa_rating (id, code, description) VALUES
(1, 'G', 'Нет возрастных ограничений'),
(2, 'PG', 'Детям рекомендуется смотреть с родителями'),
(3, 'PG-13', 'Детям до 13 лет просмотр не желателен'),
(4, 'R', 'Лицам до 17 лет только с взрослым'),
(5, 'NC-17', 'Лицам до 18 лет просмотр запрещён');

-- Инициализация жанров
MERGE INTO genre (id, name) VALUES
(1, 'Комедия'),
(2, 'Драма'),
(3, 'Мультфильм'),
(4, 'Триллер'),
(5, 'Документальный'),
(6, 'Боевик');

-- Инициализация статусов дружбы
MERGE INTO friendship_status (id, name, description) VALUES
(1, 'PENDING', 'Неподтверждённая'),
(2, 'CONFIRMED', 'Подтверждённая');

-- Добавление тестовых пользователей
MERGE INTO users (id, email, login, name, birthday) VALUES
(1, 'user1@example.com', 'user1', 'Иван Иванов', '1990-01-15'),
(2, 'user2@example.com', 'user2', 'Мария Петрова', '1995-05-20'),
(3, 'user3@example.com', 'user3', 'Алексей Сидоров', '1985-11-30'),
(4, 'user4@example.com', 'user4', 'Елена Васильева', '1992-03-10'),
(5, 'user5@example.com', 'user5', 'Дмитрий Николаев', '1988-07-25');

-- Добавление тестовых фильмов
MERGE INTO films (id, name, description, release_date, duration, mpa_rating_id) VALUES
(1, 'Крепкий орешек', 'Полицейский против террористов в небоскребе', '1988-07-15', 132, 4),
(2, 'Король Лев', 'История взросления львёнка Симбы', '1994-06-24', 88, 1),
(3, 'Назад в будущее', 'Подросток попадает в прошлое на машине времени', '1985-07-03', 116, 2),
(4, 'Побег из Шоушенка', 'Банкир оказывается в тюрьме и планирует побег', '1994-09-23', 142, 4),
(5, 'Интерстеллар', 'Космическое путешествие для спасения человечества', '2014-11-06', 169, 3),
(6, 'Джентельмены', 'Криминальная комедия о британских гангстерах', '2019-12-03', 113, 4);

-- Назначение жанров фильмам
MERGE INTO film_genre (film_id, genre_id) VALUES
(1, 6), (1, 4),  -- Крепкий орешек: Боевик, Триллер
(2, 3), (2, 2),  -- Король Лев: Мультфильм, Драма
(3, 1), (3, 5),  -- Назад в будущее: Комедия, Документальный (как пример)
(4, 2), (4, 4),  -- Побег из Шоушенка: Драма, Триллер
(5, 2), (5, 5),  -- Интерстеллар: Драма, Документальный (условно)
(6, 1), (6, 6);  -- Джентельмены: Комедия, Боевик

-- Добавление лайков к фильмам
MERGE INTO likes (film_id, user_id) VALUES
(1, 1), (1, 2), (1, 3),  -- 3 лайка "Крепкий орешек"
(2, 1), (2, 4),           -- 2 лайка "Король Лев"
(3, 2), (3, 3), (3, 5),   -- 3 лайка "Назад в будущее"
(4, 1), (4, 5),           -- 2 лайка "Побег из Шоушенка"
(5, 2), (5, 3), (5, 4), (5, 5),  -- 4 лайка "Интерстеллар"
(6, 1), (6, 3);           -- 2 лайка "Джентельмены"

-- Установление дружеских связей
MERGE INTO friendship (user_id, friend_id, status_id, created_at) VALUES
(1, 2, 2, '2023-01-10 10:00:00'),  -- Иван и Мария - подтверждённые друзья
(2, 1, 2, '2023-01-10 10:00:00'),  -- Обратная связь
(1, 3, 1, '2023-02-15 11:30:00'),  -- Иван отправил заявку Алексею (неподтверждённая)
(4, 5, 2, '2023-03-20 09:15:00'),  -- Елена и Дмитрий - подтверждённые друзья
(5, 4, 2, '2023-03-20 09:15:00'),  -- Обратная связь
(2, 4, 1, '2023-04-05 14:20:00');  -- Мария отправила заявку Елене (неподтверждённая)

-- Сброс sequence для автоинкремента (чтобы новые записи начинались с правильного ID)
ALTER TABLE users ALTER COLUMN id RESTART WITH 6;
ALTER TABLE films ALTER COLUMN id RESTART WITH 7;